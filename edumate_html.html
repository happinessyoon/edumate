<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‹¤í–‰ í‚¤ ìƒì„±ê¸°</title>
</head>
<body>
    <h1>íŒŒì´ì¬ ì‹¤í–‰ í‚¤ ìƒì„±ê¸°</h1>

    <label for="nonce">ğŸ”¹ ë‚œìˆ˜ ì…ë ¥: </label>
    <input type="text" id="nonce">
    <button id="generate_button">ì‹¤í–‰ í‚¤ ìƒì„±</button>

    <p>ğŸ”¹ ì‹¤í–‰í‚¤: <span id="execution_key"></span></p>  <!-- ì‹¤í–‰ í‚¤ê°€ ì—¬ê¸°ì— ì¶œë ¥ë©ë‹ˆë‹¤ -->

    <script>
        // ğŸ”‘ ë¹„ë°€ í‚¤ (ì¤‘ìš”!)
        const SECRET_KEY = "happinessyoon";

        // SHA-256 í•´ì‹œ ìƒì„± í•¨ìˆ˜
        async function generateExecutionKey(nonce) {
            const encoder = new TextEncoder();
            const data = encoder.encode(nonce + SECRET_KEY);
            const hashBuffer = await crypto.subtle.digest("SHA-256", data);
            const hashArray = Array.from(new Uint8Array(hashBuffer));
            const hashHex = hashArray.map(byte => byte.toString(16).padStart(2, "0")).join("");
            return hashHex.substring(0, 8);  // ì• 8ìë¦¬ ì‚¬ìš©
        }

        // ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œë  í•¨ìˆ˜
        async function generateKey() {
            const nonce = document.querySelector("#nonce").value;
            if (nonce) {
                const executionKey = await generateExecutionKey(nonce);
                document.querySelector("#execution_key").innerText = executionKey;  // ì‹¤í–‰ í‚¤ ì¶œë ¥
            } else {
                document.querySelector("#execution_key").innerText = "âŒ ë‚œìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”!";  // ì˜¤ë¥˜ ë©”ì‹œì§€
            }
        }

        // ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        document.querySelector("#generate_button").addEventListener("click", generateKey);
    </script>
</body>
</html>
